"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/personal-rivalries";
exports.ids = ["pages/api/personal-rivalries"];
exports.modules = {

/***/ "@next-auth/prisma-adapter":
/*!********************************************!*\
  !*** external "@next-auth/prisma-adapter" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/prisma-adapter");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/providers/github":
/*!*********************************************!*\
  !*** external "next-auth/providers/github" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/github");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpersonal-rivalries&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpersonal-rivalries%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpersonal-rivalries&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpersonal-rivalries%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_personal_rivalries_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/personal-rivalries/index.ts */ \"(api)/./pages/api/personal-rivalries/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_personal_rivalries_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_personal_rivalries_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/personal-rivalries\",\n        pathname: \"/api/personal-rivalries\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_personal_rivalries_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBlcnNvbmFsLXJpdmFscmllcyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGcGVyc29uYWwtcml2YWxyaWVzJTJGaW5kZXgudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDb0U7QUFDcEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLG1FQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxtRUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb290cmF0ZS8/ZTZiMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3BlcnNvbmFsLXJpdmFscmllcy9pbmRleC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3BlcnNvbmFsLXJpdmFscmllc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3BlcnNvbmFsLXJpdmFscmllc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpersonal-rivalries&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpersonal-rivalries%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"@next-auth/prisma-adapter\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/github */ \"next-auth/providers/github\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./prisma */ \"(api)/./lib/prisma.ts\");\n\n\n\n\n\nconst authOptions = {\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__.PrismaAdapter)(_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma),\n    providers: [\n        next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.GITHUB_ID,\n            clientSecret: process.env.GITHUB_SECRET\n        }),\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2___default()({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Mot de passe\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                const user = await _prisma__WEBPACK_IMPORTED_MODULE_4__.prisma.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    }\n                });\n                if (!user || !user.password) {\n                    return null;\n                }\n                const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_3___default().compare(credentials.password, user.password);\n                if (!isPasswordValid) {\n                    return null;\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    username: user.username\n                };\n            }\n        })\n    ],\n    callbacks: {\n        session: async ({ session, token })=>{\n            if (session?.user) {\n                session.user.id = token.sub;\n            }\n            return session;\n        },\n        jwt: async ({ user, token })=>{\n            if (user) {\n                token.uid = user.id;\n            }\n            return token;\n        }\n    },\n    session: {\n        strategy: \"jwt\"\n    },\n    pages: {\n        signIn: \"/auth/signin\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQ3lEO0FBQ0Y7QUFDVTtBQUNwQztBQUNJO0FBRTFCLE1BQU1LLGNBQStCO0lBQzFDQyxTQUFTTix3RUFBYUEsQ0FBQ0ksMkNBQU1BO0lBQzdCRyxXQUFXO1FBQ1ROLGlFQUFjQSxDQUFDO1lBQ2JPLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsU0FBUztZQUMvQkMsY0FBY0gsUUFBUUMsR0FBRyxDQUFDRyxhQUFhO1FBQ3pDO1FBQ0FYLHNFQUFtQkEsQ0FBQztZQUNsQlksTUFBTTtZQUNOQyxhQUFhO2dCQUNYQyxPQUFPO29CQUFFQyxPQUFPO29CQUFTQyxNQUFNO2dCQUFRO2dCQUN2Q0MsVUFBVTtvQkFBRUYsT0FBTztvQkFBZ0JDLE1BQU07Z0JBQVc7WUFDdEQ7WUFDQSxNQUFNRSxXQUFVTCxXQUFXO2dCQUN6QixJQUFJLENBQUNBLGFBQWFDLFNBQVMsQ0FBQ0QsYUFBYUksVUFBVTtvQkFDakQsT0FBTztnQkFDVDtnQkFFQSxNQUFNRSxPQUFPLE1BQU1qQiwyQ0FBTUEsQ0FBQ2lCLElBQUksQ0FBQ0MsVUFBVSxDQUFDO29CQUN4Q0MsT0FBTzt3QkFDTFAsT0FBT0QsWUFBWUMsS0FBSztvQkFDMUI7Z0JBQ0Y7Z0JBRUEsSUFBSSxDQUFDSyxRQUFRLENBQUNBLEtBQUtGLFFBQVEsRUFBRTtvQkFDM0IsT0FBTztnQkFDVDtnQkFFQSxNQUFNSyxrQkFBa0IsTUFBTXJCLHVEQUFjLENBQzFDWSxZQUFZSSxRQUFRLEVBQ3BCRSxLQUFLRixRQUFRO2dCQUdmLElBQUksQ0FBQ0ssaUJBQWlCO29CQUNwQixPQUFPO2dCQUNUO2dCQUVBLE9BQU87b0JBQ0xFLElBQUlMLEtBQUtLLEVBQUU7b0JBQ1hWLE9BQU9LLEtBQUtMLEtBQUs7b0JBQ2pCRixNQUFNTyxLQUFLUCxJQUFJO29CQUNmYSxVQUFVTixLQUFLTSxRQUFRO2dCQUN6QjtZQUNGO1FBQ0Y7S0FDRDtJQUNEQyxXQUFXO1FBQ1RDLFNBQVMsT0FBTyxFQUFFQSxPQUFPLEVBQUVDLEtBQUssRUFBRTtZQUNoQyxJQUFJRCxTQUFTUixNQUFNO2dCQUNqQlEsUUFBUVIsSUFBSSxDQUFDSyxFQUFFLEdBQUdJLE1BQU1DLEdBQUc7WUFDN0I7WUFDQSxPQUFPRjtRQUNUO1FBQ0FHLEtBQUssT0FBTyxFQUFFWCxJQUFJLEVBQUVTLEtBQUssRUFBRTtZQUN6QixJQUFJVCxNQUFNO2dCQUNSUyxNQUFNRyxHQUFHLEdBQUdaLEtBQUtLLEVBQUU7WUFDckI7WUFDQSxPQUFPSTtRQUNUO0lBQ0Y7SUFDQUQsU0FBUztRQUNQSyxVQUFVO0lBQ1o7SUFDQUMsT0FBTztRQUNMQyxRQUFRO0lBQ1Y7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9vdHJhdGUvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gXCJuZXh0LWF1dGhcIlxuaW1wb3J0IHsgUHJpc21hQWRhcHRlciB9IGZyb20gXCJAbmV4dC1hdXRoL3ByaXNtYS1hZGFwdGVyXCJcbmltcG9ydCBHaXRodWJQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9naXRodWJcIlxuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHNcIlxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIi4vcHJpc21hXCJcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIGFkYXB0ZXI6IFByaXNtYUFkYXB0ZXIocHJpc21hKSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgR2l0aHViUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdJVEhVQl9JRCEsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdJVEhVQl9TRUNSRVQhLFxuICAgIH0pLFxuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogXCJjcmVkZW50aWFsc1wiLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwiRW1haWxcIiwgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIk1vdCBkZSBwYXNzZVwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzPy5lbWFpbCB8fCAhY3JlZGVudGlhbHM/LnBhc3N3b3JkKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICghdXNlciB8fCAhdXNlci5wYXNzd29yZCkge1xuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShcbiAgICAgICAgICBjcmVkZW50aWFscy5wYXNzd29yZCxcbiAgICAgICAgICB1c2VyLnBhc3N3b3JkXG4gICAgICAgIClcblxuICAgICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIF0sXG4gIGNhbGxiYWNrczoge1xuICAgIHNlc3Npb246IGFzeW5jICh7IHNlc3Npb24sIHRva2VuIH0pID0+IHtcbiAgICAgIGlmIChzZXNzaW9uPy51c2VyKSB7XG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLnN1YiFcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uXG4gICAgfSxcbiAgICBqd3Q6IGFzeW5jICh7IHVzZXIsIHRva2VuIH0pID0+IHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLnVpZCA9IHVzZXIuaWRcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlblxuICAgIH0sXG4gIH0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogJ2p3dCcsXG4gIH0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcbiAgfSxcbn1cbiJdLCJuYW1lcyI6WyJQcmlzbWFBZGFwdGVyIiwiR2l0aHViUHJvdmlkZXIiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYmNyeXB0IiwicHJpc21hIiwiYXV0aE9wdGlvbnMiLCJhZGFwdGVyIiwicHJvdmlkZXJzIiwiY2xpZW50SWQiLCJwcm9jZXNzIiwiZW52IiwiR0lUSFVCX0lEIiwiY2xpZW50U2VjcmV0IiwiR0lUSFVCX1NFQ1JFVCIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaXNQYXNzd29yZFZhbGlkIiwiY29tcGFyZSIsImlkIiwidXNlcm5hbWUiLCJjYWxsYmFja3MiLCJzZXNzaW9uIiwidG9rZW4iLCJzdWIiLCJqd3QiLCJ1aWQiLCJzdHJhdGVneSIsInBhZ2VzIiwic2lnbkluIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/auth.ts\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFFO0FBRWxFLElBQUlJLElBQXlCLEVBQWNILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zvb3RyYXRlLy4vbGliL3ByaXNtYS50cz85ODIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxufVxuXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KClcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].ts":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/auth */ \"(api)/./lib/auth.ts\");\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(_lib_auth__WEBPACK_IMPORTED_MODULE_1__.authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0M7QUFDZTtBQUUvQyxpRUFBZUEsZ0RBQVFBLENBQUNDLGtEQUFXQSxDQUFDQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9vdHJhdGUvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzPzJlOGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoIGZyb20gJ25leHQtYXV0aCdcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vbGliL2F1dGgnXG5cbmV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKGF1dGhPcHRpb25zKVxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiYXV0aE9wdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./pages/api/personal-rivalries/index.ts":
/*!***********************************************!*\
  !*** ./pages/api/personal-rivalries/index.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n// pages/api/personal-rivalries/index.ts - VERSION COMPL√àTE FONCTIONNELLE\n\n\n\n// Import des fonctions de notification pour les rivalit√©s\nasync function createNotification(data) {\n    try {\n        return await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.notification.create({\n            data: {\n                userId: data.userId,\n                type: data.type,\n                title: data.title,\n                message: data.message,\n                data: data.data ? JSON.stringify(data.data) : null,\n                read: false\n            }\n        });\n    } catch (error) {\n        console.error(\"‚ùå Erreur cr\\xe9ation notification:\", error);\n        return null;\n    }\n}\nasync function notifyRivalryRequest(senderId, receiverId, senderName, sport, rivalryId) {\n    const sportEmojis = {\n        \"tennis\": \"\\uD83C\\uDFBE\",\n        \"football\": \"‚öΩ\",\n        \"basketball\": \"\\uD83C\\uDFC0\",\n        \"pingpong\": \"\\uD83C\\uDFD3\",\n        \"badminton\": \"\\uD83C\\uDFF8\",\n        \"running\": \"\\uD83C\\uDFC3\",\n        \"swimming\": \"\\uD83C\\uDFCA\",\n        \"cycling\": \"\\uD83D\\uDEB4\",\n        \"golf\": \"‚õ≥\",\n        \"chess\": \"‚ôüÔ∏è\",\n        \"boxing\": \"\\uD83E\\uDD4A\",\n        \"mma\": \"\\uD83E\\uDD4B\",\n        \"other\": \"\\uD83C\\uDFC6\"\n    };\n    const emoji = sportEmojis[sport] || \"\\uD83C\\uDFC6\";\n    const sportName = sport.charAt(0).toUpperCase() + sport.slice(1);\n    return createNotification({\n        userId: receiverId,\n        type: \"rivalry_request\",\n        title: \"Nouvelle demande de rivalit\\xe9\",\n        message: `${senderName} vous d√©fie en ${sportName} ${emoji}`,\n        actionUrl: `/personal-matches?tab=requests`,\n        data: {\n            senderId,\n            senderName,\n            sport,\n            rivalryId,\n            emoji\n        }\n    });\n}\nasync function handler(req, res) {\n    console.log(\"\\uD83C\\uDFAF API rivalit\\xe9s appel\\xe9e - m\\xe9thode:\", req.method, \"query:\", req.query);\n    try {\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__.authOptions);\n        if (!session) {\n            console.log(\"‚ùå Pas de session\");\n            return res.status(401).json({\n                message: \"Non autoris\\xe9\"\n            });\n        }\n        // R√©cup√©rer l'utilisateur complet depuis la DB\n        const userEmail = session.user?.email;\n        if (!userEmail) {\n            console.log(\"‚ùå Pas d'email dans la session\");\n            return res.status(401).json({\n                message: \"Email non trouv\\xe9 dans la session\"\n            });\n        }\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n            where: {\n                email: userEmail\n            },\n            select: {\n                id: true,\n                name: true,\n                email: true\n            }\n        });\n        if (!user) {\n            console.log(\"‚ùå Utilisateur non trouv\\xe9 en DB avec email:\", userEmail);\n            return res.status(401).json({\n                message: \"Utilisateur non trouv\\xe9\"\n            });\n        }\n        const userId = user.id;\n        console.log(\"‚úÖ UserId r\\xe9cup\\xe9r\\xe9:\", userId, \"- Utilisateur:\", user.name);\n        switch(req.method){\n            case \"GET\":\n                const { type } = req.query;\n                console.log(\"\\uD83D\\uDCD6 GET rivalit\\xe9s - type:\", type);\n                if (type === \"requests\") {\n                    // üì• DEMANDES RE√áUES\n                    const receivedRequests = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.personalRivalry.findMany({\n                        where: {\n                            user2Id: userId,\n                            status: \"PENDING\"\n                        },\n                        include: {\n                            user1: {\n                                select: {\n                                    id: true,\n                                    name: true,\n                                    username: true,\n                                    image: true,\n                                    email: true\n                                }\n                            }\n                        },\n                        orderBy: {\n                            createdAt: \"desc\"\n                        }\n                    });\n                    console.log(`üì• ${receivedRequests.length} demandes re√ßues trouv√©es`);\n                    const formattedRequests = receivedRequests.map((rivalry)=>({\n                            id: rivalry.id,\n                            sport: rivalry.sport,\n                            friend: {\n                                id: rivalry.user1.id,\n                                name: rivalry.user1.name,\n                                username: rivalry.user1.username,\n                                image: rivalry.user1.image,\n                                email: rivalry.user1.email\n                            },\n                            message: rivalry.message,\n                            createdAt: rivalry.createdAt.toISOString()\n                        }));\n                    return res.status(200).json({\n                        rivalries: formattedRequests\n                    });\n                } else if (type === \"sent\") {\n                    // üì§ DEMANDES ENVOY√âES\n                    const sentRequests = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.personalRivalry.findMany({\n                        where: {\n                            user1Id: userId,\n                            status: \"PENDING\"\n                        },\n                        include: {\n                            user2: {\n                                select: {\n                                    id: true,\n                                    name: true,\n                                    username: true,\n                                    image: true,\n                                    email: true\n                                }\n                            }\n                        },\n                        orderBy: {\n                            createdAt: \"desc\"\n                        }\n                    });\n                    console.log(`üì§ ${sentRequests.length} demandes envoy√©es trouv√©es`);\n                    const formattedSent = sentRequests.map((rivalry)=>({\n                            id: rivalry.id,\n                            sport: rivalry.sport,\n                            friend: {\n                                id: rivalry.user2.id,\n                                name: rivalry.user2.name,\n                                username: rivalry.user2.username,\n                                image: rivalry.user2.image,\n                                email: rivalry.user2.email\n                            },\n                            message: rivalry.message,\n                            createdAt: rivalry.createdAt.toISOString(),\n                            isSent: true\n                        }));\n                    return res.status(200).json({\n                        rivalries: formattedSent\n                    });\n                } else {\n                    // üèÜ RIVALIT√âS ACTIVES\n                    const activeRivalries = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.personalRivalry.findMany({\n                        where: {\n                            OR: [\n                                {\n                                    user1Id: userId,\n                                    status: \"ACTIVE\"\n                                },\n                                {\n                                    user2Id: userId,\n                                    status: \"ACTIVE\"\n                                }\n                            ]\n                        },\n                        include: {\n                            user1: {\n                                select: {\n                                    id: true,\n                                    name: true,\n                                    username: true,\n                                    image: true,\n                                    email: true\n                                }\n                            },\n                            user2: {\n                                select: {\n                                    id: true,\n                                    name: true,\n                                    username: true,\n                                    image: true,\n                                    email: true\n                                }\n                            },\n                            matches: {\n                                orderBy: {\n                                    date: \"desc\"\n                                },\n                                take: 5 // Les 5 derniers matchs\n                            }\n                        },\n                        orderBy: {\n                            updatedAt: \"desc\"\n                        }\n                    });\n                    console.log(`üèÜ ${activeRivalries.length} rivalit√©s actives trouv√©es`);\n                    // Formater les rivalit√©s avec statistiques\n                    const formattedRivalries = activeRivalries.map((rivalry)=>{\n                        const isUser1 = rivalry.user1Id === userId;\n                        const friend = isUser1 ? rivalry.user2 : rivalry.user1;\n                        // Calculer les stats\n                        let myWins = 0, myLosses = 0, draws = 0;\n                        rivalry.matches.forEach((match)=>{\n                            const myScore = isUser1 ? match.user1Score : match.user2Score;\n                            const friendScore = isUser1 ? match.user2Score : match.user1Score;\n                            // Extraire les scores num√©riques (format libre mais on essaie)\n                            const myNumeric = parseInt(myScore.match(/\\d+/)?.[0] || \"0\");\n                            const friendNumeric = parseInt(friendScore.match(/\\d+/)?.[0] || \"0\");\n                            if (myNumeric > friendNumeric) myWins++;\n                            else if (friendNumeric > myNumeric) myLosses++;\n                            else draws++;\n                        });\n                        // Calculer la s√©rie actuelle\n                        let currentStreak = 0;\n                        let streakType = \"none\";\n                        if (rivalry.matches.length > 0) {\n                            const lastResult = rivalry.matches[0] // Le plus r√©cent\n                            ;\n                            const myLastScore = isUser1 ? lastResult.user1Score : lastResult.user2Score;\n                            const friendLastScore = isUser1 ? lastResult.user2Score : lastResult.user1Score;\n                            const myLastNumeric = parseInt(myLastScore.match(/\\d+/)?.[0] || \"0\");\n                            const friendLastNumeric = parseInt(friendLastScore.match(/\\d+/)?.[0] || \"0\");\n                            if (myLastNumeric > friendLastNumeric) {\n                                streakType = \"wins\";\n                                // Compter les victoires cons√©cutives\n                                for (const match of rivalry.matches){\n                                    const myScore = isUser1 ? match.user1Score : match.user2Score;\n                                    const friendScore = isUser1 ? match.user2Score : match.user1Score;\n                                    const myNum = parseInt(myScore.match(/\\d+/)?.[0] || \"0\");\n                                    const friendNum = parseInt(friendScore.match(/\\d+/)?.[0] || \"0\");\n                                    if (myNum > friendNum) currentStreak++;\n                                    else break;\n                                }\n                            } else if (friendLastNumeric > myLastNumeric) {\n                                streakType = \"losses\";\n                                // Compter les d√©faites cons√©cutives\n                                for (const match of rivalry.matches){\n                                    const myScore = isUser1 ? match.user1Score : match.user2Score;\n                                    const friendScore = isUser1 ? match.user2Score : match.user1Score;\n                                    const myNum = parseInt(myScore.match(/\\d+/)?.[0] || \"0\");\n                                    const friendNum = parseInt(friendScore.match(/\\d+/)?.[0] || \"0\");\n                                    if (friendNum > myNum) currentStreak++;\n                                    else break;\n                                }\n                            }\n                        }\n                        return {\n                            id: rivalry.id,\n                            sport: rivalry.sport,\n                            status: rivalry.status,\n                            createdAt: rivalry.createdAt.toISOString(),\n                            friend: {\n                                id: friend.id,\n                                name: friend.name,\n                                username: friend.username,\n                                image: friend.image,\n                                email: friend.email\n                            },\n                            myStats: {\n                                wins: myWins,\n                                losses: myLosses,\n                                totalMatches: rivalry.matches.length,\n                                currentStreak,\n                                streakType\n                            },\n                            friendStats: {\n                                wins: myLosses,\n                                losses: myWins,\n                                totalMatches: rivalry.matches.length\n                            },\n                            recentMatches: rivalry.matches.map((match)=>({\n                                    id: match.id,\n                                    date: match.date.toISOString(),\n                                    myScore: isUser1 ? match.user1Score : match.user2Score,\n                                    friendScore: isUser1 ? match.user2Score : match.user1Score,\n                                    location: match.location,\n                                    comment: match.comment,\n                                    addedBy: match.addedBy,\n                                    winner: (()=>{\n                                        const myScore = isUser1 ? match.user1Score : match.user2Score;\n                                        const friendScore = isUser1 ? match.user2Score : match.user1Score;\n                                        const myNum = parseInt(myScore.match(/\\d+/)?.[0] || \"0\");\n                                        const friendNum = parseInt(friendScore.match(/\\d+/)?.[0] || \"0\");\n                                        if (myNum > friendNum) return \"me\";\n                                        if (friendNum > myNum) return \"friend\";\n                                        return \"draw\";\n                                    })()\n                                }))\n                        };\n                    });\n                    return res.status(200).json({\n                        rivalries: formattedRivalries\n                    });\n                }\n            case \"POST\":\n                console.log(\"‚ûï POST nouvelle rivalit\\xe9\");\n                console.log(\"Body re\\xe7u:\", req.body);\n                const { friendId, sport, message } = req.body;\n                // Validation\n                if (!friendId || !sport) {\n                    console.log(\"‚ùå Validation \\xe9chou\\xe9e\");\n                    return res.status(400).json({\n                        message: \"friendId et sport sont requis\"\n                    });\n                }\n                if (friendId === userId) {\n                    console.log(\"‚ùå Tentative rivalit\\xe9 avec soi-m\\xeame\");\n                    return res.status(400).json({\n                        message: \"Vous ne pouvez pas cr\\xe9er une rivalit\\xe9 avec vous-m\\xeame\"\n                    });\n                }\n                // V√©rifier que l'ami existe\n                const friend = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                    where: {\n                        id: friendId\n                    },\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true\n                    }\n                });\n                if (!friend) {\n                    console.log(\"‚ùå Ami non trouv\\xe9 avec ID:\", friendId);\n                    return res.status(404).json({\n                        message: \"Ami non trouv\\xe9\"\n                    });\n                }\n                console.log(\"\\uD83D\\uDC6B Ami trouv\\xe9:\", friend.name, \"(\" + friend.email + \")\");\n                // V√©rifier qu'ils sont amis\n                const friendship = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.friendship.findFirst({\n                    where: {\n                        OR: [\n                            {\n                                senderId: userId,\n                                receiverId: friendId,\n                                status: \"ACCEPTED\"\n                            },\n                            {\n                                receiverId: userId,\n                                senderId: friendId,\n                                status: \"ACCEPTED\"\n                            }\n                        ]\n                    }\n                });\n                if (!friendship) {\n                    console.log(\"‚ùå Pas d'amiti\\xe9 trouv\\xe9e entre\", user.name, \"et\", friend.name);\n                    return res.status(403).json({\n                        message: \"Vous devez \\xeatre amis pour cr\\xe9er une rivalit\\xe9\"\n                    });\n                }\n                console.log(\"‚úÖ Amiti\\xe9 confirm\\xe9e\");\n                // V√©rifier qu'une rivalit√© n'existe pas d√©j√†\n                const existingRivalry = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.personalRivalry.findFirst({\n                    where: {\n                        OR: [\n                            {\n                                user1Id: userId,\n                                user2Id: friendId,\n                                sport\n                            },\n                            {\n                                user1Id: friendId,\n                                user2Id: userId,\n                                sport\n                            }\n                        ]\n                    }\n                });\n                if (existingRivalry) {\n                    console.log(\"‚ùå Rivalit\\xe9 d\\xe9j\\xe0 existante:\", existingRivalry.id);\n                    return res.status(400).json({\n                        message: `Une rivalit√© en ${sport} existe d√©j√† avec cet ami`,\n                        existingRivalry: {\n                            id: existingRivalry.id,\n                            status: existingRivalry.status\n                        }\n                    });\n                }\n                // üéØ CR√âER LA RIVALIT√â\n                const rivalry = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.personalRivalry.create({\n                    data: {\n                        user1Id: userId,\n                        user2Id: friendId,\n                        sport,\n                        message,\n                        createdBy: userId,\n                        status: \"PENDING\"\n                    },\n                    include: {\n                        user1: {\n                            select: {\n                                id: true,\n                                name: true,\n                                username: true,\n                                image: true\n                            }\n                        },\n                        user2: {\n                            select: {\n                                id: true,\n                                name: true,\n                                username: true,\n                                image: true\n                            }\n                        }\n                    }\n                });\n                console.log(\"\\uD83C\\uDF89 RIVALIT\\xc9 CR\\xc9\\xc9E EN DB:\", rivalry.id);\n                // üîî ENVOYER LA NOTIFICATION\n                try {\n                    await notifyRivalryRequest(userId, friendId, user.name || \"Un ami\", sport, rivalry.id);\n                    console.log(\"‚úÖ Notification envoy\\xe9e \\xe0\", friend.name);\n                } catch (error) {\n                    console.error(\"‚ùå Erreur notification:\", error);\n                // On continue m√™me si la notification √©choue\n                }\n                return res.status(201).json({\n                    message: \"Demande de rivalit\\xe9 envoy\\xe9e avec succ\\xe8s\",\n                    rivalry: {\n                        id: rivalry.id,\n                        sport: rivalry.sport,\n                        status: rivalry.status,\n                        friend: {\n                            id: rivalry.user2.id,\n                            name: rivalry.user2.name,\n                            username: rivalry.user2.username,\n                            image: rivalry.user2.image\n                        },\n                        isCreator: true,\n                        message: rivalry.message,\n                        createdAt: rivalry.createdAt\n                    }\n                });\n            case \"PUT\":\n                // üéØ ACCEPTER/REFUSER UNE DEMANDE DE RIVALIT√â\n                console.log(\"‚úÖ PUT - Accepter/Refuser rivalit\\xe9\");\n                const { rivalryId, action } = req.body;\n                if (!rivalryId || !action) {\n                    return res.status(400).json({\n                        message: \"rivalryId et action sont requis\"\n                    });\n                }\n                const targetRivalry = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.personalRivalry.findFirst({\n                    where: {\n                        id: rivalryId,\n                        user2Id: userId,\n                        status: \"PENDING\"\n                    },\n                    include: {\n                        user1: {\n                            select: {\n                                id: true,\n                                name: true\n                            }\n                        }\n                    }\n                });\n                if (!targetRivalry) {\n                    return res.status(404).json({\n                        message: \"Demande de rivalit\\xe9 non trouv\\xe9e\"\n                    });\n                }\n                if (action === \"accept\") {\n                    // Accepter la rivalit√©\n                    const updatedRivalry = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.personalRivalry.update({\n                        where: {\n                            id: rivalryId\n                        },\n                        data: {\n                            status: \"ACTIVE\"\n                        }\n                    });\n                    // TODO: Envoyer notification d'acceptation au cr√©ateur\n                    console.log(`‚úÖ Rivalit√© accept√©e par ${user.name}`);\n                    return res.status(200).json({\n                        message: \"Rivalit\\xe9 accept\\xe9e !\",\n                        rivalry: updatedRivalry\n                    });\n                } else if (action === \"decline\") {\n                    // Refuser et supprimer la rivalit√©\n                    await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.personalRivalry.delete({\n                        where: {\n                            id: rivalryId\n                        }\n                    });\n                    console.log(`‚ùå Rivalit√© refus√©e par ${user.name}`);\n                    return res.status(200).json({\n                        message: \"Rivalit\\xe9 refus\\xe9e\"\n                    });\n                } else {\n                    return res.status(400).json({\n                        message: \"Action invalide\"\n                    });\n                }\n            default:\n                return res.status(405).json({\n                    message: \"M\\xe9thode non autoris\\xe9e\"\n                });\n        }\n    } catch (error) {\n        console.error(\"\\uD83D\\uDCA5 ERREUR SERVEUR:\", error);\n        return res.status(500).json({\n            message: \"Erreur serveur\",\n            error: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcGVyc29uYWwtcml2YWxyaWVzL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEseUVBQXlFO0FBRXhCO0FBQ0U7QUFDUDtBQUU1QywwREFBMEQ7QUFDMUQsZUFBZUcsbUJBQW1CQyxJQUFTO0lBQ3pDLElBQUk7UUFDRixPQUFPLE1BQU1GLCtDQUFNQSxDQUFDRyxZQUFZLENBQUNDLE1BQU0sQ0FBQztZQUN0Q0YsTUFBTTtnQkFDSkcsUUFBUUgsS0FBS0csTUFBTTtnQkFDbkJDLE1BQU1KLEtBQUtJLElBQUk7Z0JBQ2ZDLE9BQU9MLEtBQUtLLEtBQUs7Z0JBQ2pCQyxTQUFTTixLQUFLTSxPQUFPO2dCQUNyQk4sTUFBTUEsS0FBS0EsSUFBSSxHQUFHTyxLQUFLQyxTQUFTLENBQUNSLEtBQUtBLElBQUksSUFBSTtnQkFDOUNTLE1BQU07WUFDUjtRQUNGO0lBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxzQ0FBbUNBO1FBQ2pELE9BQU87SUFDVDtBQUNGO0FBRUEsZUFBZUUscUJBQXFCQyxRQUFnQixFQUFFQyxVQUFrQixFQUFFQyxVQUFrQixFQUFFQyxLQUFhLEVBQUVDLFNBQWlCO0lBQzVILE1BQU1DLGNBQXNDO1FBQzFDLFVBQVU7UUFBTSxZQUFZO1FBQUssY0FBYztRQUFNLFlBQVk7UUFDakUsYUFBYTtRQUFNLFdBQVc7UUFBTSxZQUFZO1FBQU0sV0FBVztRQUNqRSxRQUFRO1FBQUssU0FBUztRQUFNLFVBQVU7UUFBTSxPQUFPO1FBQU0sU0FBUztJQUNwRTtJQUVBLE1BQU1DLFFBQVFELFdBQVcsQ0FBQ0YsTUFBTSxJQUFJO0lBQ3BDLE1BQU1JLFlBQVlKLE1BQU1LLE1BQU0sQ0FBQyxHQUFHQyxXQUFXLEtBQUtOLE1BQU1PLEtBQUssQ0FBQztJQUU5RCxPQUFPeEIsbUJBQW1CO1FBQ3hCSSxRQUFRVztRQUNSVixNQUFNO1FBQ05DLE9BQU87UUFDUEMsU0FBUyxDQUFDLEVBQUVTLFdBQVcs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QUMsQ0FBQztvQkFFakQsT0FBT2QsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQzt3QkFBRTNCLFNBQVM7b0JBQW1CO2dCQUU1RCxPQUFPO29CQUNMLE9BQU9xQixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO3dCQUFFM0IsU0FBUztvQkFBa0I7Z0JBQzNEO1lBRUY7Z0JBQ0UsT0FBT3FCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUUzQixTQUFTO2dCQUF3QjtRQUNuRTtJQUNGLEVBQUUsT0FBT0ksT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsZ0NBQXNCQTtRQUNwQyxPQUFPaUIsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQjNCLFNBQVM7WUFDVEksT0FBT0EsTUFBTUosT0FBTztRQUN0QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb290cmF0ZS8uL3BhZ2VzL2FwaS9wZXJzb25hbC1yaXZhbHJpZXMvaW5kZXgudHM/ZGZmNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9hcGkvcGVyc29uYWwtcml2YWxyaWVzL2luZGV4LnRzIC0gVkVSU0lPTiBDT01QTMOIVEUgRk9OQ1RJT05ORUxMRVxuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoL25leHQnXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJy4uL2F1dGgvWy4uLm5leHRhdXRoXSdcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4uLy4uLy4uL2xpYi9wcmlzbWEnXG5cbi8vIEltcG9ydCBkZXMgZm9uY3Rpb25zIGRlIG5vdGlmaWNhdGlvbiBwb3VyIGxlcyByaXZhbGl0w6lzXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVOb3RpZmljYXRpb24oZGF0YTogYW55KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5ub3RpZmljYXRpb24uY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcbiAgICAgICAgdHlwZTogZGF0YS50eXBlLFxuICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlLFxuICAgICAgICBkYXRhOiBkYXRhLmRhdGEgPyBKU09OLnN0cmluZ2lmeShkYXRhLmRhdGEpIDogbnVsbCxcbiAgICAgICAgcmVhZDogZmFsc2VcbiAgICAgIH1cbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJldXIgY3LDqWF0aW9uIG5vdGlmaWNhdGlvbjonLCBlcnJvcilcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG5vdGlmeVJpdmFscnlSZXF1ZXN0KHNlbmRlcklkOiBzdHJpbmcsIHJlY2VpdmVySWQ6IHN0cmluZywgc2VuZGVyTmFtZTogc3RyaW5nLCBzcG9ydDogc3RyaW5nLCByaXZhbHJ5SWQ6IHN0cmluZykge1xuICBjb25zdCBzcG9ydEVtb2ppczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAndGVubmlzJzogJ/Cfjr4nLCAnZm9vdGJhbGwnOiAn4pq9JywgJ2Jhc2tldGJhbGwnOiAn8J+PgCcsICdwaW5ncG9uZyc6ICfwn4+TJyxcbiAgICAnYmFkbWludG9uJzogJ/Cfj7gnLCAncnVubmluZyc6ICfwn4+DJywgJ3N3aW1taW5nJzogJ/Cfj4onLCAnY3ljbGluZyc6ICfwn5q0JyxcbiAgICAnZ29sZic6ICfim7MnLCAnY2hlc3MnOiAn4pmf77iPJywgJ2JveGluZyc6ICfwn6WKJywgJ21tYSc6ICfwn6WLJywgJ290aGVyJzogJ/Cfj4YnXG4gIH1cblxuICBjb25zdCBlbW9qaSA9IHNwb3J0RW1vamlzW3Nwb3J0XSB8fCAn8J+PhidcbiAgY29uc3Qgc3BvcnROYW1lID0gc3BvcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzcG9ydC5zbGljZSgxKVxuXG4gIHJldHVybiBjcmVhdGVOb3RpZmljYXRpb24oe1xuICAgIHVzZXJJZDogcmVjZWl2ZXJJZCxcbiAgICB0eXBlOiAncml2YWxyeV9yZXF1ZXN0JyxcbiAgICB0aXRsZTogJ05vdXZlbGxlIGRlbWFuZGUgZGUgcml2YWxpdMOpJyxcbiAgICBtZXNzYWdlOiBgJHtzZW5kZXJOYW1lfSB2b3VzIGTDqWZpZSBlbiAke3Nwb3J0TmFtZX0gJHtlbW9qaX1gLFxuICAgIGFjdGlvblVybDogYC9wZXJzb25hbC1tYXRjaGVzP3RhYj1yZXF1ZXN0c2AsXG4gICAgZGF0YTogeyBzZW5kZXJJZCwgc2VuZGVyTmFtZSwgc3BvcnQsIHJpdmFscnlJZCwgZW1vamkgfVxuICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGNvbnNvbGUubG9nKCfwn46vIEFQSSByaXZhbGl0w6lzIGFwcGVsw6llIC0gbcOpdGhvZGU6JywgcmVxLm1ldGhvZCwgJ3F1ZXJ5OicsIHJlcS5xdWVyeSlcbiAgXG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMsIGF1dGhPcHRpb25zKVxuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBQYXMgZGUgc2Vzc2lvbicpXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnTm9uIGF1dG9yaXPDqScgfSlcbiAgICB9XG5cbiAgICAvLyBSw6ljdXDDqXJlciBsJ3V0aWxpc2F0ZXVyIGNvbXBsZXQgZGVwdWlzIGxhIERCXG4gICAgY29uc3QgdXNlckVtYWlsID0gc2Vzc2lvbi51c2VyPy5lbWFpbFxuICAgIGlmICghdXNlckVtYWlsKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIFBhcyBkXFwnZW1haWwgZGFucyBsYSBzZXNzaW9uJylcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdFbWFpbCBub24gdHJvdXbDqSBkYW5zIGxhIHNlc3Npb24nIH0pXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgZW1haWw6IHVzZXJFbWFpbCB9LFxuICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSB9XG4gICAgfSlcblxuICAgIGlmICghdXNlcikge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBVdGlsaXNhdGV1ciBub24gdHJvdXbDqSBlbiBEQiBhdmVjIGVtYWlsOicsIHVzZXJFbWFpbClcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVdGlsaXNhdGV1ciBub24gdHJvdXbDqScgfSlcbiAgICB9XG5cbiAgICBjb25zdCB1c2VySWQgPSB1c2VyLmlkXG4gICAgY29uc29sZS5sb2coJ+KchSBVc2VySWQgcsOpY3Vww6lyw6k6JywgdXNlcklkLCAnLSBVdGlsaXNhdGV1cjonLCB1c2VyLm5hbWUpXG5cbiAgICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcbiAgICAgIGNhc2UgJ0dFVCc6XG4gICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gcmVxLnF1ZXJ5XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OWIEdFVCByaXZhbGl0w6lzIC0gdHlwZTonLCB0eXBlKVxuXG4gICAgICAgIGlmICh0eXBlID09PSAncmVxdWVzdHMnKSB7XG4gICAgICAgICAgLy8g8J+TpSBERU1BTkRFUyBSRcOHVUVTXG4gICAgICAgICAgY29uc3QgcmVjZWl2ZWRSZXF1ZXN0cyA9IGF3YWl0IHByaXNtYS5wZXJzb25hbFJpdmFscnkuZmluZE1hbnkoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgdXNlcjJJZDogdXNlcklkLCAvLyBMJ3V0aWxpc2F0ZXVyIGFjdHVlbCBlc3QgbGUgZGVzdGluYXRhaXJlXG4gICAgICAgICAgICAgIHN0YXR1czogJ1BFTkRJTkcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB1c2VyMToge1xuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdXNlcm5hbWU6IHRydWUsIGltYWdlOiB0cnVlLCBlbWFpbDogdHJ1ZSB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH1cbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgY29uc29sZS5sb2coYPCfk6UgJHtyZWNlaXZlZFJlcXVlc3RzLmxlbmd0aH0gZGVtYW5kZXMgcmXDp3VlcyB0cm91dsOpZXNgKVxuXG4gICAgICAgICAgY29uc3QgZm9ybWF0dGVkUmVxdWVzdHMgPSByZWNlaXZlZFJlcXVlc3RzLm1hcChyaXZhbHJ5ID0+ICh7XG4gICAgICAgICAgICBpZDogcml2YWxyeS5pZCxcbiAgICAgICAgICAgIHNwb3J0OiByaXZhbHJ5LnNwb3J0LFxuICAgICAgICAgICAgZnJpZW5kOiB7XG4gICAgICAgICAgICAgIGlkOiByaXZhbHJ5LnVzZXIxLmlkLFxuICAgICAgICAgICAgICBuYW1lOiByaXZhbHJ5LnVzZXIxLm5hbWUsXG4gICAgICAgICAgICAgIHVzZXJuYW1lOiByaXZhbHJ5LnVzZXIxLnVzZXJuYW1lLFxuICAgICAgICAgICAgICBpbWFnZTogcml2YWxyeS51c2VyMS5pbWFnZSxcbiAgICAgICAgICAgICAgZW1haWw6IHJpdmFscnkudXNlcjEuZW1haWxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXNzYWdlOiByaXZhbHJ5Lm1lc3NhZ2UsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHJpdmFscnkuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9KSlcblxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJpdmFscmllczogZm9ybWF0dGVkUmVxdWVzdHMgfSlcblxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzZW50Jykge1xuICAgICAgICAgIC8vIPCfk6QgREVNQU5ERVMgRU5WT1nDiUVTXG4gICAgICAgICAgY29uc3Qgc2VudFJlcXVlc3RzID0gYXdhaXQgcHJpc21hLnBlcnNvbmFsUml2YWxyeS5maW5kTWFueSh7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICB1c2VyMUlkOiB1c2VySWQsIC8vIEwndXRpbGlzYXRldXIgYWN0dWVsIGVzdCBsJ2V4cMOpZGl0ZXVyXG4gICAgICAgICAgICAgIHN0YXR1czogJ1BFTkRJTkcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB1c2VyMjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdXNlcm5hbWU6IHRydWUsIGltYWdlOiB0cnVlLCBlbWFpbDogdHJ1ZSB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH1cbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgY29uc29sZS5sb2coYPCfk6QgJHtzZW50UmVxdWVzdHMubGVuZ3RofSBkZW1hbmRlcyBlbnZvecOpZXMgdHJvdXbDqWVzYClcblxuICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZFNlbnQgPSBzZW50UmVxdWVzdHMubWFwKHJpdmFscnkgPT4gKHtcbiAgICAgICAgICAgIGlkOiByaXZhbHJ5LmlkLFxuICAgICAgICAgICAgc3BvcnQ6IHJpdmFscnkuc3BvcnQsXG4gICAgICAgICAgICBmcmllbmQ6IHtcbiAgICAgICAgICAgICAgaWQ6IHJpdmFscnkudXNlcjIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJpdmFscnkudXNlcjIubmFtZSxcbiAgICAgICAgICAgICAgdXNlcm5hbWU6IHJpdmFscnkudXNlcjIudXNlcm5hbWUsXG4gICAgICAgICAgICAgIGltYWdlOiByaXZhbHJ5LnVzZXIyLmltYWdlLFxuICAgICAgICAgICAgICBlbWFpbDogcml2YWxyeS51c2VyMi5lbWFpbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJpdmFscnkubWVzc2FnZSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogcml2YWxyeS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGlzU2VudDogdHJ1ZVxuICAgICAgICAgIH0pKVxuXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcml2YWxyaWVzOiBmb3JtYXR0ZWRTZW50IH0pXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDwn4+GIFJJVkFMSVTDiVMgQUNUSVZFU1xuICAgICAgICAgIGNvbnN0IGFjdGl2ZVJpdmFscmllcyA9IGF3YWl0IHByaXNtYS5wZXJzb25hbFJpdmFscnkuZmluZE1hbnkoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgICB7IHVzZXIxSWQ6IHVzZXJJZCwgc3RhdHVzOiAnQUNUSVZFJyB9LFxuICAgICAgICAgICAgICAgIHsgdXNlcjJJZDogdXNlcklkLCBzdGF0dXM6ICdBQ1RJVkUnIH1cbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgdXNlcjE6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHVzZXJuYW1lOiB0cnVlLCBpbWFnZTogdHJ1ZSwgZW1haWw6IHRydWUgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB1c2VyMjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdXNlcm5hbWU6IHRydWUsIGltYWdlOiB0cnVlLCBlbWFpbDogdHJ1ZSB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG1hdGNoZXM6IHtcbiAgICAgICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9LFxuICAgICAgICAgICAgICAgIHRha2U6IDUgLy8gTGVzIDUgZGVybmllcnMgbWF0Y2hzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcmRlckJ5OiB7IHVwZGF0ZWRBdDogJ2Rlc2MnIH1cbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgY29uc29sZS5sb2coYPCfj4YgJHthY3RpdmVSaXZhbHJpZXMubGVuZ3RofSByaXZhbGl0w6lzIGFjdGl2ZXMgdHJvdXbDqWVzYClcblxuICAgICAgICAgIC8vIEZvcm1hdGVyIGxlcyByaXZhbGl0w6lzIGF2ZWMgc3RhdGlzdGlxdWVzXG4gICAgICAgICAgY29uc3QgZm9ybWF0dGVkUml2YWxyaWVzID0gYWN0aXZlUml2YWxyaWVzLm1hcChyaXZhbHJ5ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzVXNlcjEgPSByaXZhbHJ5LnVzZXIxSWQgPT09IHVzZXJJZFxuICAgICAgICAgICAgY29uc3QgZnJpZW5kID0gaXNVc2VyMSA/IHJpdmFscnkudXNlcjIgOiByaXZhbHJ5LnVzZXIxXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENhbGN1bGVyIGxlcyBzdGF0c1xuICAgICAgICAgICAgbGV0IG15V2lucyA9IDAsIG15TG9zc2VzID0gMCwgZHJhd3MgPSAwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJpdmFscnkubWF0Y2hlcy5mb3JFYWNoKG1hdGNoID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbXlTY29yZSA9IGlzVXNlcjEgPyBtYXRjaC51c2VyMVNjb3JlIDogbWF0Y2gudXNlcjJTY29yZVxuICAgICAgICAgICAgICBjb25zdCBmcmllbmRTY29yZSA9IGlzVXNlcjEgPyBtYXRjaC51c2VyMlNjb3JlIDogbWF0Y2gudXNlcjFTY29yZVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRXh0cmFpcmUgbGVzIHNjb3JlcyBudW3DqXJpcXVlcyAoZm9ybWF0IGxpYnJlIG1haXMgb24gZXNzYWllKVxuICAgICAgICAgICAgICBjb25zdCBteU51bWVyaWMgPSBwYXJzZUludChteVNjb3JlLm1hdGNoKC9cXGQrLyk/LlswXSB8fCAnMCcpXG4gICAgICAgICAgICAgIGNvbnN0IGZyaWVuZE51bWVyaWMgPSBwYXJzZUludChmcmllbmRTY29yZS5tYXRjaCgvXFxkKy8pPy5bMF0gfHwgJzAnKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKG15TnVtZXJpYyA+IGZyaWVuZE51bWVyaWMpIG15V2lucysrXG4gICAgICAgICAgICAgIGVsc2UgaWYgKGZyaWVuZE51bWVyaWMgPiBteU51bWVyaWMpIG15TG9zc2VzKytcbiAgICAgICAgICAgICAgZWxzZSBkcmF3cysrXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAvLyBDYWxjdWxlciBsYSBzw6lyaWUgYWN0dWVsbGVcbiAgICAgICAgICAgIGxldCBjdXJyZW50U3RyZWFrID0gMFxuICAgICAgICAgICAgbGV0IHN0cmVha1R5cGU6ICd3aW5zJyB8ICdsb3NzZXMnIHwgJ25vbmUnID0gJ25vbmUnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyaXZhbHJ5Lm1hdGNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBjb25zdCBsYXN0UmVzdWx0ID0gcml2YWxyeS5tYXRjaGVzWzBdIC8vIExlIHBsdXMgcsOpY2VudFxuICAgICAgICAgICAgICBjb25zdCBteUxhc3RTY29yZSA9IGlzVXNlcjEgPyBsYXN0UmVzdWx0LnVzZXIxU2NvcmUgOiBsYXN0UmVzdWx0LnVzZXIyU2NvcmVcbiAgICAgICAgICAgICAgY29uc3QgZnJpZW5kTGFzdFNjb3JlID0gaXNVc2VyMSA/IGxhc3RSZXN1bHQudXNlcjJTY29yZSA6IGxhc3RSZXN1bHQudXNlcjFTY29yZVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgbXlMYXN0TnVtZXJpYyA9IHBhcnNlSW50KG15TGFzdFNjb3JlLm1hdGNoKC9cXGQrLyk/LlswXSB8fCAnMCcpXG4gICAgICAgICAgICAgIGNvbnN0IGZyaWVuZExhc3ROdW1lcmljID0gcGFyc2VJbnQoZnJpZW5kTGFzdFNjb3JlLm1hdGNoKC9cXGQrLyk/LlswXSB8fCAnMCcpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAobXlMYXN0TnVtZXJpYyA+IGZyaWVuZExhc3ROdW1lcmljKSB7XG4gICAgICAgICAgICAgICAgc3RyZWFrVHlwZSA9ICd3aW5zJ1xuICAgICAgICAgICAgICAgIC8vIENvbXB0ZXIgbGVzIHZpY3RvaXJlcyBjb25zw6ljdXRpdmVzXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiByaXZhbHJ5Lm1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG15U2NvcmUgPSBpc1VzZXIxID8gbWF0Y2gudXNlcjFTY29yZSA6IG1hdGNoLnVzZXIyU2NvcmVcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZyaWVuZFNjb3JlID0gaXNVc2VyMSA/IG1hdGNoLnVzZXIyU2NvcmUgOiBtYXRjaC51c2VyMVNjb3JlXG4gICAgICAgICAgICAgICAgICBjb25zdCBteU51bSA9IHBhcnNlSW50KG15U2NvcmUubWF0Y2goL1xcZCsvKT8uWzBdIHx8ICcwJylcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZyaWVuZE51bSA9IHBhcnNlSW50KGZyaWVuZFNjb3JlLm1hdGNoKC9cXGQrLyk/LlswXSB8fCAnMCcpXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmIChteU51bSA+IGZyaWVuZE51bSkgY3VycmVudFN0cmVhaysrXG4gICAgICAgICAgICAgICAgICBlbHNlIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZyaWVuZExhc3ROdW1lcmljID4gbXlMYXN0TnVtZXJpYykge1xuICAgICAgICAgICAgICAgIHN0cmVha1R5cGUgPSAnbG9zc2VzJ1xuICAgICAgICAgICAgICAgIC8vIENvbXB0ZXIgbGVzIGTDqWZhaXRlcyBjb25zw6ljdXRpdmVzXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiByaXZhbHJ5Lm1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG15U2NvcmUgPSBpc1VzZXIxID8gbWF0Y2gudXNlcjFTY29yZSA6IG1hdGNoLnVzZXIyU2NvcmVcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZyaWVuZFNjb3JlID0gaXNVc2VyMSA/IG1hdGNoLnVzZXIyU2NvcmUgOiBtYXRjaC51c2VyMVNjb3JlXG4gICAgICAgICAgICAgICAgICBjb25zdCBteU51bSA9IHBhcnNlSW50KG15U2NvcmUubWF0Y2goL1xcZCsvKT8uWzBdIHx8ICcwJylcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZyaWVuZE51bSA9IHBhcnNlSW50KGZyaWVuZFNjb3JlLm1hdGNoKC9cXGQrLyk/LlswXSB8fCAnMCcpXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmIChmcmllbmROdW0gPiBteU51bSkgY3VycmVudFN0cmVhaysrXG4gICAgICAgICAgICAgICAgICBlbHNlIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGlkOiByaXZhbHJ5LmlkLFxuICAgICAgICAgICAgICBzcG9ydDogcml2YWxyeS5zcG9ydCxcbiAgICAgICAgICAgICAgc3RhdHVzOiByaXZhbHJ5LnN0YXR1cyxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiByaXZhbHJ5LmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICBmcmllbmQ6IHtcbiAgICAgICAgICAgICAgICBpZDogZnJpZW5kLmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGZyaWVuZC5uYW1lLFxuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBmcmllbmQudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgaW1hZ2U6IGZyaWVuZC5pbWFnZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogZnJpZW5kLmVtYWlsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG15U3RhdHM6IHtcbiAgICAgICAgICAgICAgICB3aW5zOiBteVdpbnMsXG4gICAgICAgICAgICAgICAgbG9zc2VzOiBteUxvc3NlcyxcbiAgICAgICAgICAgICAgICB0b3RhbE1hdGNoZXM6IHJpdmFscnkubWF0Y2hlcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgY3VycmVudFN0cmVhayxcbiAgICAgICAgICAgICAgICBzdHJlYWtUeXBlXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZyaWVuZFN0YXRzOiB7XG4gICAgICAgICAgICAgICAgd2luczogbXlMb3NzZXMsIC8vIExlcyBkw6lmYWl0ZXMgZGUgbCd1dGlsaXNhdGV1ciA9IHZpY3RvaXJlcyBkZSBsJ2FtaVxuICAgICAgICAgICAgICAgIGxvc3NlczogbXlXaW5zLFxuICAgICAgICAgICAgICAgIHRvdGFsTWF0Y2hlczogcml2YWxyeS5tYXRjaGVzLmxlbmd0aFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICByZWNlbnRNYXRjaGVzOiByaXZhbHJ5Lm1hdGNoZXMubWFwKG1hdGNoID0+ICh7XG4gICAgICAgICAgICAgICAgaWQ6IG1hdGNoLmlkLFxuICAgICAgICAgICAgICAgIGRhdGU6IG1hdGNoLmRhdGUudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBteVNjb3JlOiBpc1VzZXIxID8gbWF0Y2gudXNlcjFTY29yZSA6IG1hdGNoLnVzZXIyU2NvcmUsXG4gICAgICAgICAgICAgICAgZnJpZW5kU2NvcmU6IGlzVXNlcjEgPyBtYXRjaC51c2VyMlNjb3JlIDogbWF0Y2gudXNlcjFTY29yZSxcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogbWF0Y2gubG9jYXRpb24sXG4gICAgICAgICAgICAgICAgY29tbWVudDogbWF0Y2guY29tbWVudCxcbiAgICAgICAgICAgICAgICBhZGRlZEJ5OiBtYXRjaC5hZGRlZEJ5LFxuICAgICAgICAgICAgICAgIHdpbm5lcjogKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG15U2NvcmUgPSBpc1VzZXIxID8gbWF0Y2gudXNlcjFTY29yZSA6IG1hdGNoLnVzZXIyU2NvcmVcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZyaWVuZFNjb3JlID0gaXNVc2VyMSA/IG1hdGNoLnVzZXIyU2NvcmUgOiBtYXRjaC51c2VyMVNjb3JlXG4gICAgICAgICAgICAgICAgICBjb25zdCBteU51bSA9IHBhcnNlSW50KG15U2NvcmUubWF0Y2goL1xcZCsvKT8uWzBdIHx8ICcwJylcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZyaWVuZE51bSA9IHBhcnNlSW50KGZyaWVuZFNjb3JlLm1hdGNoKC9cXGQrLyk/LlswXSB8fCAnMCcpXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmIChteU51bSA+IGZyaWVuZE51bSkgcmV0dXJuICdtZSdcbiAgICAgICAgICAgICAgICAgIGlmIChmcmllbmROdW0gPiBteU51bSkgcmV0dXJuICdmcmllbmQnXG4gICAgICAgICAgICAgICAgICByZXR1cm4gJ2RyYXcnXG4gICAgICAgICAgICAgICAgfSkoKVxuICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcml2YWxyaWVzOiBmb3JtYXR0ZWRSaXZhbHJpZXMgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgIGNhc2UgJ1BPU1QnOlxuICAgICAgICBjb25zb2xlLmxvZygn4p6VIFBPU1Qgbm91dmVsbGUgcml2YWxpdMOpJylcbiAgICAgICAgY29uc29sZS5sb2coJ0JvZHkgcmXDp3U6JywgcmVxLmJvZHkpXG4gICAgICAgIFxuICAgICAgICBjb25zdCB7IGZyaWVuZElkLCBzcG9ydCwgbWVzc2FnZSB9ID0gcmVxLmJvZHlcbiAgICAgICAgXG4gICAgICAgIC8vIFZhbGlkYXRpb25cbiAgICAgICAgaWYgKCFmcmllbmRJZCB8fCAhc3BvcnQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4p2MIFZhbGlkYXRpb24gw6ljaG91w6llJylcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnZnJpZW5kSWQgZXQgc3BvcnQgc29udCByZXF1aXMnIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChmcmllbmRJZCA9PT0gdXNlcklkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KdjCBUZW50YXRpdmUgcml2YWxpdMOpIGF2ZWMgc29pLW3Dqm1lJylcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVm91cyBuZSBwb3V2ZXogcGFzIGNyw6llciB1bmUgcml2YWxpdMOpIGF2ZWMgdm91cy1tw6ptZScgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVsOpcmlmaWVyIHF1ZSBsJ2FtaSBleGlzdGVcbiAgICAgICAgY29uc3QgZnJpZW5kID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGZyaWVuZElkIH0sXG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCFmcmllbmQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4p2MIEFtaSBub24gdHJvdXbDqSBhdmVjIElEOicsIGZyaWVuZElkKVxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdBbWkgbm9uIHRyb3V2w6knIH0pXG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygn8J+RqyBBbWkgdHJvdXbDqTonLCBmcmllbmQubmFtZSwgJygnICsgZnJpZW5kLmVtYWlsICsgJyknKVxuXG4gICAgICAgIC8vIFbDqXJpZmllciBxdSdpbHMgc29udCBhbWlzXG4gICAgICAgIGNvbnN0IGZyaWVuZHNoaXAgPSBhd2FpdCBwcmlzbWEuZnJpZW5kc2hpcC5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBPUjogW1xuICAgICAgICAgICAgICB7IHNlbmRlcklkOiB1c2VySWQsIHJlY2VpdmVySWQ6IGZyaWVuZElkLCBzdGF0dXM6ICdBQ0NFUFRFRCcgfSxcbiAgICAgICAgICAgICAgeyByZWNlaXZlcklkOiB1c2VySWQsIHNlbmRlcklkOiBmcmllbmRJZCwgc3RhdHVzOiAnQUNDRVBURUQnIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCFmcmllbmRzaGlwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KdjCBQYXMgZFxcJ2FtaXRpw6kgdHJvdXbDqWUgZW50cmUnLCB1c2VyLm5hbWUsICdldCcsIGZyaWVuZC5uYW1lKVxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdWb3VzIGRldmV6IMOqdHJlIGFtaXMgcG91ciBjcsOpZXIgdW5lIHJpdmFsaXTDqScgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgQW1pdGnDqSBjb25maXJtw6llJylcblxuICAgICAgICAvLyBWw6lyaWZpZXIgcXUndW5lIHJpdmFsaXTDqSBuJ2V4aXN0ZSBwYXMgZMOpasOgXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUml2YWxyeSA9IGF3YWl0IHByaXNtYS5wZXJzb25hbFJpdmFscnkuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgeyB1c2VyMUlkOiB1c2VySWQsIHVzZXIySWQ6IGZyaWVuZElkLCBzcG9ydCB9LFxuICAgICAgICAgICAgICB7IHVzZXIxSWQ6IGZyaWVuZElkLCB1c2VyMklkOiB1c2VySWQsIHNwb3J0IH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKGV4aXN0aW5nUml2YWxyeSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinYwgUml2YWxpdMOpIGTDqWrDoCBleGlzdGFudGU6JywgZXhpc3RpbmdSaXZhbHJ5LmlkKVxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICAgICAgbWVzc2FnZTogYFVuZSByaXZhbGl0w6kgZW4gJHtzcG9ydH0gZXhpc3RlIGTDqWrDoCBhdmVjIGNldCBhbWlgLFxuICAgICAgICAgICAgZXhpc3RpbmdSaXZhbHJ5OiB7XG4gICAgICAgICAgICAgIGlkOiBleGlzdGluZ1JpdmFscnkuaWQsXG4gICAgICAgICAgICAgIHN0YXR1czogZXhpc3RpbmdSaXZhbHJ5LnN0YXR1c1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICAvLyDwn46vIENSw4lFUiBMQSBSSVZBTElUw4lcbiAgICAgICAgY29uc3Qgcml2YWxyeSA9IGF3YWl0IHByaXNtYS5wZXJzb25hbFJpdmFscnkuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB1c2VyMUlkOiB1c2VySWQsICAgIC8vIENyw6lhdGV1clxuICAgICAgICAgICAgdXNlcjJJZDogZnJpZW5kSWQsICAvLyBEZXN0aW5hdGFpcmVcbiAgICAgICAgICAgIHNwb3J0LFxuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGNyZWF0ZWRCeTogdXNlcklkLFxuICAgICAgICAgICAgc3RhdHVzOiAnUEVORElORydcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHVzZXIxOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdXNlcm5hbWU6IHRydWUsIGltYWdlOiB0cnVlIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1c2VyMjoge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHVzZXJuYW1lOiB0cnVlLCBpbWFnZTogdHJ1ZSB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn46JIFJJVkFMSVTDiSBDUsOJw4lFIEVOIERCOicsIHJpdmFscnkuaWQpXG5cbiAgICAgICAgLy8g8J+UlCBFTlZPWUVSIExBIE5PVElGSUNBVElPTlxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IG5vdGlmeVJpdmFscnlSZXF1ZXN0KFxuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgZnJpZW5kSWQsXG4gICAgICAgICAgICB1c2VyLm5hbWUgfHwgJ1VuIGFtaScsXG4gICAgICAgICAgICBzcG9ydCxcbiAgICAgICAgICAgIHJpdmFscnkuaWRcbiAgICAgICAgICApXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBOb3RpZmljYXRpb24gZW52b3nDqWUgw6AnLCBmcmllbmQubmFtZSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyZXVyIG5vdGlmaWNhdGlvbjonLCBlcnJvcilcbiAgICAgICAgICAvLyBPbiBjb250aW51ZSBtw6ptZSBzaSBsYSBub3RpZmljYXRpb24gw6ljaG91ZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgXG4gICAgICAgICAgbWVzc2FnZTogJ0RlbWFuZGUgZGUgcml2YWxpdMOpIGVudm95w6llIGF2ZWMgc3VjY8OocycsXG4gICAgICAgICAgcml2YWxyeToge1xuICAgICAgICAgICAgaWQ6IHJpdmFscnkuaWQsXG4gICAgICAgICAgICBzcG9ydDogcml2YWxyeS5zcG9ydCxcbiAgICAgICAgICAgIHN0YXR1czogcml2YWxyeS5zdGF0dXMsXG4gICAgICAgICAgICBmcmllbmQ6IHtcbiAgICAgICAgICAgICAgaWQ6IHJpdmFscnkudXNlcjIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJpdmFscnkudXNlcjIubmFtZSxcbiAgICAgICAgICAgICAgdXNlcm5hbWU6IHJpdmFscnkudXNlcjIudXNlcm5hbWUsXG4gICAgICAgICAgICAgIGltYWdlOiByaXZhbHJ5LnVzZXIyLmltYWdlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNDcmVhdG9yOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogcml2YWxyeS5tZXNzYWdlLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiByaXZhbHJ5LmNyZWF0ZWRBdFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgY2FzZSAnUFVUJzpcbiAgICAgICAgLy8g8J+OryBBQ0NFUFRFUi9SRUZVU0VSIFVORSBERU1BTkRFIERFIFJJVkFMSVTDiVxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFBVVCAtIEFjY2VwdGVyL1JlZnVzZXIgcml2YWxpdMOpJylcbiAgICAgICAgY29uc3QgeyByaXZhbHJ5SWQsIGFjdGlvbiB9ID0gcmVxLmJvZHlcblxuICAgICAgICBpZiAoIXJpdmFscnlJZCB8fCAhYWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ3JpdmFscnlJZCBldCBhY3Rpb24gc29udCByZXF1aXMnIH0pXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0YXJnZXRSaXZhbHJ5ID0gYXdhaXQgcHJpc21hLnBlcnNvbmFsUml2YWxyeS5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZDogcml2YWxyeUlkLFxuICAgICAgICAgICAgdXNlcjJJZDogdXNlcklkLCAvLyBTZXVsZW1lbnQgbGUgZGVzdGluYXRhaXJlIHBldXQgYWNjZXB0ZXIvcmVmdXNlclxuICAgICAgICAgICAgc3RhdHVzOiAnUEVORElORydcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHVzZXIxOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSB9IH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCF0YXJnZXRSaXZhbHJ5KSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0RlbWFuZGUgZGUgcml2YWxpdMOpIG5vbiB0cm91dsOpZScgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhY3Rpb24gPT09ICdhY2NlcHQnKSB7XG4gICAgICAgICAgLy8gQWNjZXB0ZXIgbGEgcml2YWxpdMOpXG4gICAgICAgICAgY29uc3QgdXBkYXRlZFJpdmFscnkgPSBhd2FpdCBwcmlzbWEucGVyc29uYWxSaXZhbHJ5LnVwZGF0ZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcml2YWxyeUlkIH0sXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogJ0FDVElWRScgfVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICAvLyBUT0RPOiBFbnZveWVyIG5vdGlmaWNhdGlvbiBkJ2FjY2VwdGF0aW9uIGF1IGNyw6lhdGV1clxuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgUml2YWxpdMOpIGFjY2VwdMOpZSBwYXIgJHt1c2VyLm5hbWV9YClcblxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IFxuICAgICAgICAgICAgbWVzc2FnZTogJ1JpdmFsaXTDqSBhY2NlcHTDqWUgIScsXG4gICAgICAgICAgICByaXZhbHJ5OiB1cGRhdGVkUml2YWxyeVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdkZWNsaW5lJykge1xuICAgICAgICAgIC8vIFJlZnVzZXIgZXQgc3VwcHJpbWVyIGxhIHJpdmFsaXTDqVxuICAgICAgICAgIGF3YWl0IHByaXNtYS5wZXJzb25hbFJpdmFscnkuZGVsZXRlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiByaXZhbHJ5SWQgfVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhg4p2MIFJpdmFsaXTDqSByZWZ1c8OpZSBwYXIgJHt1c2VyLm5hbWV9YClcblxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdSaXZhbGl0w6kgcmVmdXPDqWUnIH0pXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnQWN0aW9uIGludmFsaWRlJyB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ03DqXRob2RlIG5vbiBhdXRvcmlzw6llJyB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfwn5KlIEVSUkVVUiBTRVJWRVVSOicsIGVycm9yKVxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgbWVzc2FnZTogJ0VycmV1ciBzZXJ2ZXVyJywgXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH0pXG4gIH1cbn0iXSwibmFtZXMiOlsiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwicHJpc21hIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwiZGF0YSIsIm5vdGlmaWNhdGlvbiIsImNyZWF0ZSIsInVzZXJJZCIsInR5cGUiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwicmVhZCIsImVycm9yIiwiY29uc29sZSIsIm5vdGlmeVJpdmFscnlSZXF1ZXN0Iiwic2VuZGVySWQiLCJyZWNlaXZlcklkIiwic2VuZGVyTmFtZSIsInNwb3J0Iiwicml2YWxyeUlkIiwic3BvcnRFbW9qaXMiLCJlbW9qaSIsInNwb3J0TmFtZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJhY3Rpb25VcmwiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibG9nIiwibWV0aG9kIiwicXVlcnkiLCJzZXNzaW9uIiwic3RhdHVzIiwianNvbiIsInVzZXJFbWFpbCIsInVzZXIiLCJlbWFpbCIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInNlbGVjdCIsImlkIiwibmFtZSIsInJlY2VpdmVkUmVxdWVzdHMiLCJwZXJzb25hbFJpdmFscnkiLCJmaW5kTWFueSIsInVzZXIySWQiLCJpbmNsdWRlIiwidXNlcjEiLCJ1c2VybmFtZSIsImltYWdlIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsImxlbmd0aCIsImZvcm1hdHRlZFJlcXVlc3RzIiwibWFwIiwicml2YWxyeSIsImZyaWVuZCIsInRvSVNPU3RyaW5nIiwicml2YWxyaWVzIiwic2VudFJlcXVlc3RzIiwidXNlcjFJZCIsInVzZXIyIiwiZm9ybWF0dGVkU2VudCIsImlzU2VudCIsImFjdGl2ZVJpdmFscmllcyIsIk9SIiwibWF0Y2hlcyIsImRhdGUiLCJ0YWtlIiwidXBkYXRlZEF0IiwiZm9ybWF0dGVkUml2YWxyaWVzIiwiaXNVc2VyMSIsIm15V2lucyIsIm15TG9zc2VzIiwiZHJhd3MiLCJmb3JFYWNoIiwibWF0Y2giLCJteVNjb3JlIiwidXNlcjFTY29yZSIsInVzZXIyU2NvcmUiLCJmcmllbmRTY29yZSIsIm15TnVtZXJpYyIsInBhcnNlSW50IiwiZnJpZW5kTnVtZXJpYyIsImN1cnJlbnRTdHJlYWsiLCJzdHJlYWtUeXBlIiwibGFzdFJlc3VsdCIsIm15TGFzdFNjb3JlIiwiZnJpZW5kTGFzdFNjb3JlIiwibXlMYXN0TnVtZXJpYyIsImZyaWVuZExhc3ROdW1lcmljIiwibXlOdW0iLCJmcmllbmROdW0iLCJteVN0YXRzIiwid2lucyIsImxvc3NlcyIsInRvdGFsTWF0Y2hlcyIsImZyaWVuZFN0YXRzIiwicmVjZW50TWF0Y2hlcyIsImxvY2F0aW9uIiwiY29tbWVudCIsImFkZGVkQnkiLCJ3aW5uZXIiLCJib2R5IiwiZnJpZW5kSWQiLCJmcmllbmRzaGlwIiwiZmluZEZpcnN0IiwiZXhpc3RpbmdSaXZhbHJ5IiwiY3JlYXRlZEJ5IiwiaXNDcmVhdG9yIiwiYWN0aW9uIiwidGFyZ2V0Uml2YWxyeSIsInVwZGF0ZWRSaXZhbHJ5IiwidXBkYXRlIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/personal-rivalries/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpersonal-rivalries&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpersonal-rivalries%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();